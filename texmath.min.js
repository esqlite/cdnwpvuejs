"use strict";function texmath(e,t){let n=t&&t.delimiters||"dollars",a=t&&t.macros;if(n in texmath.rules){for(let t of texmath.rules[n].inline)e.inline.ruler.before("escape",t.name,texmath.inline(t)),e.renderer.rules[t.name]=((e,n)=>t.tmpl.replace(/\$1/,texmath.render(e[n].content,!1,a)));for(let t of texmath.rules[n].block)e.block.ruler.before("fence",t.name,texmath.block(t)),e.renderer.rules[t.name]=((e,n)=>t.tmpl.replace(/\$2/,e[n].info).replace(/\$1/,texmath.render(e[n].content,!0,a)))}}texmath.applyRule=function(e,t,n,a){let m,l,r;return e.rex.lastIndex=n,(l=(m=t.startsWith(e.tag,n)&&(!e.pre||e.pre(t,n)))&&e.rex.exec(t))&&(l.lastIndex=e.rex.lastIndex,r=(!e.post||e.post(t,l.lastIndex-1))&&(!a||!l[1].includes("\n"))),e.rex.lastIndex=0,r&&l},texmath.inline=(e=>(function(t,n){let a=texmath.applyRule(e,t.src,t.pos);if(a){if(!n){let n=t.push(e.name,"math",0);n.content=a[1],n.markup=e.tag}t.pos=a.lastIndex}return!!a})),texmath.block=(e=>(function(t,n,a,m){let l=texmath.applyRule(e,t.src,t.bMarks[n]+t.tShift[n],"blockquote"===t.parentType);if(l){if(!m){let n=t.push(e.name,"math",0);n.block=!0,n.content=l[1],n.info=l[l.length-1],n.markup=e.tag}for(let e=n,m=l.lastIndex-1;e<a;e++)if(m>=t.bMarks[e]&&m<=t.eMarks[e]){t.line=e+1;break}t.pos=l.lastIndex}return!!l})),texmath.render=function(e,t,n){let a;try{a=texmath.katex.renderToString(e,{throwOnError:!1,displayMode:t,macros:n})}catch(t){a=e+": "+t.message.replace("<","&lt;")}return a},texmath.use=function(e){return texmath.katex=e,texmath},texmath.$_pre=((e,t)=>{let n=t>0&&e[t-1].charCodeAt(0);return!n||92!==n&&(n<48||n>57)}),texmath.$_post=((e,t)=>{let n=e[t+1]&&e[t+1].charCodeAt(0);return!n||n<48||n>57}),texmath.rules={brackets:{inline:[{name:"math_inline",rex:/\\\((.+?)\\\)/gy,tmpl:"<eq>$1</eq>",tag:"\\("}],block:[{name:"math_block_eqno",rex:/\\\[(((?!\\\]|\\\[)[\s\S])+?)\\\]\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"\\["},{name:"math_block",rex:/\\\[([\s\S]+?)\\\]/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"\\["}]},gitlab:{inline:[{name:"math_inline",rex:/\$`(.+?)`\$/gy,tmpl:"<eq>$1</eq>",tag:"$`"}],block:[{name:"math_block_eqno",rex:/`{3}math\s+?([^`]+?)\s+?`{3}\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"```math"},{name:"math_block",rex:/`{3}math\s+?([^`]+?)\s+?`{3}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"```math"}]},julia:{inline:[{name:"math_inline",rex:/`{2}([^`]+?)`{2}/gy,tmpl:"<eq>$1</eq>",tag:"``"},{name:"math_inline",rex:/\$(\S[^$\r\n]*?[^\s\\]{1}?)\$/gy,tmpl:"<eq>$1</eq>",tag:"$",pre:texmath.$_pre,post:texmath.$_post},{name:"math_single",rex:/\$([^$\s\\]{1}?)\$/gy,tmpl:"<eq>$1</eq>",tag:"$",pre:texmath.$_pre,post:texmath.$_post}],block:[{name:"math_block_eqno",rex:/`{3}math\s+?([^`]+?)\s+?`{3}\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"```math"},{name:"math_block",rex:/`{3}math\s+?([^`]+?)\s+?`{3}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"```math"}]},kramdown:{inline:[{name:"math_inline",rex:/\${2}([^$\r\n]*?)\${2}/gy,tmpl:"<eq>$1</eq>",tag:"$$"}],block:[{name:"math_block_eqno",rex:/\${2}([^$]*?)\${2}\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"$$"},{name:"math_block",rex:/\${2}([^$]*?)\${2}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"$$"}]},dollars:{inline:[{name:"math_inline",rex:/\$(\S[^$\r\n]*?[^\s\\]{1}?)\$/gy,tmpl:"<eq>$1</eq>",tag:"$",pre:texmath.$_pre,post:texmath.$_post},{name:"math_single",rex:/\$([^$\s\\]{1}?)\$/gy,tmpl:"<eq>$1</eq>",tag:"$",pre:texmath.$_pre,post:texmath.$_post}],block:[{name:"math_block_eqno",rex:/\${2}([^$]*?)\${2}\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"$$"},{name:"math_block",rex:/\${2}([^$]*?)\${2}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"$$"}]}},"object"==typeof module&&module.exports&&(module.exports=texmath);